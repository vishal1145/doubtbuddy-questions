<?php
$curl = curl_init();
curl_setopt_array($curl, array(
  CURLOPT_URL => 'https://prodapi.doubtbuddy.com/question/?page=1',
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_ENCODING => '',
  CURLOPT_MAXREDIRS => 10,
  CURLOPT_TIMEOUT => 0,
  CURLOPT_FOLLOWLOCATION => true,
  CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
  CURLOPT_CUSTOMREQUEST => 'GET',
  CURLOPT_HTTPHEADER => array(
    'Content-Type: application/json'
  ),
));

$response = curl_exec($curl);
curl_close($curl);
$questions = json_decode($response, true);
?>


<!-- <?php
      
          if(isset($_GET['button2'])) { 
            $page++;
            callAPI($page);
          } 
        ?> 
        <form method="get"> 
          
          <input type="submit" name="button2"
                value="Button2"/> 
        </form>  -->

// document.getElementById('load-more').addEventListener('click', function() {
    // fetch('https://prodapi.doubtbuddy.com/question/?page=2')
    //     .then(response => response.json())
    //     .then(data => {
    //         data.forEach(question => {
    //             $('#questions').append(`
    //                 <article>
    //                     <h3>${question.chapter.name}</h3>
    //                     <p>${question.description.value}</p>
    //                     <ul class='actions'>
    //                         <li><a href='details.php?id=${question._id}' class='button'>View Solution</a></li>
    //                     </ul>
    //                 </article>
    //             `);
    //         });
    //     })
    //     .catch(error => {
    //         console.error('Error:', error);
    //     });
    // });

    <section>
          <header class="major">
            <h2>Questions</h2>
          </header>
          <div id="questions" class="posts">
            <?php 
            if (is_array($questions) && !empty($questions)) {
              // $counter = 1; 
              // $pageNo = 1;
              // $pageSize = 2;
              foreach ($questions as $question) {
                $question_id = $question['_id']; 
                // $display =  $pageNo == 1 ? "" : "display:none;";
                echo "<article id=".$pageNo." style=".$display.">
                        <h3>{$question['chapter']['name']}</h3>
                        <p>\({$question['description']['value']}\)</p>
                        
                        <ul class='actions'>
                          <li><a href='details.php?id={$question_id}' class='button'>View Solution</a></li>
                        </ul>
                      </article>";
                      // if($counter == $pageSize) {
                      //   $pageNo++;
                      //   $counter = 1;
                      // } else {
                      //   $counter++;
                      // }
              }
            } else {
              echo "<p>No questions available at the moment.</p>";
            }
            ?> 
            </div>
            <input id="hdnPage" type="hidden" value="1"/>
        </section>

        <script>

  // function loadMoreElement() {
  //   var page = parseInt(document.getElementById("hdnPage").value)  + 1;
  //   // find al;; e;emet wth tjis id and display block 
  //   document.getElementById(page.toString()).style.display=  "block"
  //   document.getElementById("hdnPage").value = page
  // }
    
    </script>